<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax 기초</title>
</head>
<body>
	<!-- 
		* AJAX : Asynchronous JavaScript and XML
		- AJAX를 사용하는 이유
		1) 웹 페이지가 로드된 후 서버에서 데이터를 불러오기 위해
		2) 새로고침 없이 페이지를 업데이트
		3) 백그라운드에서 웹 서버에 데이터 전송
		
		* XML(Extensible Markup Language)
		
		
	 -->
	 <div id="output">
	 	<h2>XMLHttpRequest Object</h2>
	 	<button type="button" onclick="loadDoc()">내용변경</button>
	 	
	 </div>
	 <script type="text/javascript">
	 	function loadDoc() {
			let xhttp = new XMLHttpRequest(); // 브라우저 내장 request 객체
			xhttp.onreadystatechange = function() {
				console.log(this.readyState);
				console.log(this.status);
				// readState 속성이 변경될 때 호출할 함수를 정의
				if(this.readyState == 4 && this.status == 200) { // 404는 없음(찾을수 없음)
					console.log(this);
					document.getElementById("output").innerHTML
						= this.responseText;
					// this.reponseText : 응답 데이터를 문자열로 변환
				}
			};
			
			xhttp.open("GET", "01_demo_test.txt", true);
			// open(method, url, async) : xhttp에 보낸 정보 세팅
			// method : 요청 타입 GET or POST
			// url : 파일 또는 요청 서버 위치
			// async : true(비동기) or false(동기)
			
			xhttp.send(); // 보내는 거
			
		} // end loadDoc()
	 
	 </script>
	
</body>
</html>