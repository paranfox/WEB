<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>글자 추천</title>
</head>
<body>
	<h2>아레에 글을 입력해 주세요.</h2>
	<p>
		첫 글자 : <input type="text" id="txt" onkeyup="showHint(this.value)">
	</p>
	<p>
		추천 : <span id="txtHint"></span>
	</p>

	<script type="text/javascript">
		function showHint(str) {
			// GET 방식으로 04_get_hint.jsp 페이지에 데이터 전송하고
			// 결과를 추천 span에 출력
			
			// 즉 값이 들어가기 전에 에러가 나는 것을 미리 처리하는 것이 중요함 (입구 컷이 중요하다.)
			if(str.length == 0) { // 입력하면 0일경우 막음
				document.getElementById("txtHint").innerHTML = "";
				return; // 밑에가 아에 실행이 안됨 (초기화)
			}
			
			let xhttp = new XMLHttpRequest(); // 브라우저 내장 request 객체
			xhttp.onreadystatechange = function() {
				// readState 속성이 변경될 때 호출할 함수를 정의
				if(this.readyState == 4 && this.status == 200) { // 404는 없음(찾을수 없음)
					console.log(this);
					document.getElementById("txtHint").innerHTML
						= this.responseText;
					// this.reponseText : 응답 데이터를 문자열로 변환
				}
			};
			// var txt = document.getElementById("txt").value;
			xhttp.open("GET", "04_get_hint.jsp?txt="+str, true);
			xhttp.send(); // 보내는 거
			
		} // end showHint()
	</script>


</body>
</html>